import{_ as C,k as w,r as k,l as R,a as b,o as i,c,d as u,e as x,u as d,b as r,F as A,i as I,m as M,n as B,A as H,t as S,a6 as D,f as N}from"./index-2dae8f78.js";import{f as T}from"./filecontentmenu-6adbe480.js";import{a as z}from"./index-4194ef73.js";import"./index-1adbd7d5.js";const E={class:"mt-4 text-sm font-bold box-main"},L=["onContextmenu"],O=["data-fileid","data-filename","data-filesuffix","data-folderid"],P={__name:"index",setup(V){let t=w([]);function p(e,n){return e==="docx"?"#0f90e3":e==="xlsx"?"#01a408":e==="pdf"?"#ea5454":e==="txt"?"rgba(0, 0, 0, 0.6)":e==="md"?"#5A96DB":n==="folder"?"#ffd153":""}const m=e=>{!e.filesuffix&&e.suffix&&(e.filesuffix=e.suffix),!e.suffix&&e.filesuffix&&(e.suffix=e.filesuffix),e.folderid&&(e.type="folder",e.icon="icon-24gf-folderOpen"),e.filesuffix==="md"&&(e.type="markdown",e.icon="icon-file-markdown1"),e.filesuffix==="txt"&&(e.type="txt",e.icon="icon-wenben1"),e.filesuffix==="xlsx"&&(e.type="excel",e.icon="icon-excel"),e.filesuffix==="docx"&&(e.type="word",e.icon="icon-Word"),e.suffix=e.filesuffix};let a=k(null);const _=(e,n)=>{a.value.showContentMenu(e,n,"recycle")},y=()=>{a.value.hiddenContentMenu()},g=e=>{const n=t.findIndex(f=>f.fileid===e);n!==-1&&t.splice(n,1)},F=e=>{const n=t.findIndex(f=>f.fileid===e);n!==-1&&t.splice(n,1)},h=e=>{console.log("文件已移动到回收站:",e)},v=e=>{console.log("重命名文件索引:",e)};return R(async()=>{try{let{userid:e}=JSON.parse(sessionStorage.getItem("user"));const n=await z({userid:e,state:2});if(!n){console.error("获取回收站文件失败：无响应");return}const{code:f,msg:o,data:l}=n;if(f!==200){console.error("获取回收站文件失败:",o);return}t.length=0,l&&Array.isArray(l)?l.forEach(s=>{m(s),t.push(s)}):console.warn("回收站文件数据格式异常:",l)}catch(e){console.error("加载回收站文件异常:",e)}}),(e,n)=>{const f=b("el-page-header");return i(),c("div",{class:"box",onClick:y},[u(f,{icon:d(D),onBack:n[0]||(n[0]=o=>d(N).back())},{content:x(()=>n[1]||(n[1]=[r("span",{class:"text-large font-600 mr-3"}," 回收站 ",-1)])),default:x(()=>[u(T,{ref_key:"filecontentmenuRef",ref:a,onPutFileToRecycle:h,onRename:v,onDeleteFileFromRecycle:g,onRestoreFileFromRecycle:F},null,512),r("div",E,[(i(!0),c(A,null,I(d(t),(o,l)=>(i(),c("div",{class:"box-main-item",key:l,onContextmenu:M(s=>_(s,l),["prevent","stop"])},[r("i",{"data-fileid":o.fileid,"data-filename":o.filename,"data-filesuffix":o.filesuffix,"data-folderid":o.folderid||"",class:B(["iconfont",o.icon]),style:H({color:p(o.filesuffix,o.type)})},null,14,O),r("span",null,S(o.type==="folder"?o.foldername:o.filename+"."+o.filesuffix),1)],40,L))),128))])]),_:1},8,["icon"])])}}},q=C(P,[["__scopeId","data-v-ffffa012"]]);export{q as default};
