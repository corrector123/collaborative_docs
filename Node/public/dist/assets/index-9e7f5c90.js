import{_ as w,l as I,r as R,m as k,a as b,o as f,c as d,d as p,e as _,u,b as i,F as M,j as S,q as A,n as B,C as H,t as D,a6 as N,f as T,p as z,h as E}from"./index-8153480e.js";import{f as L}from"./filecontentmenu-b9085cdd.js";import{g as O}from"./index-3895d7f4.js";import"./share-43c49a61.js";import"./execcontent-0635da60.js";import"./index-98580762.js";const P=r=>(z("data-v-7968d424"),r=r(),E(),r),V=P(()=>i("span",{class:"text-large font-600 mr-3"}," 回收站 ",-1)),j={class:"mt-4 text-sm font-bold box-main"},q=["onContextmenu"],J=["data-fileid","data-filename","data-filesuffix","data-folderid"],W={__name:"index",setup(r){let t=I([]);function x(e,o){return e==="docx"?"#0f90e3":e==="xlsx"?"#01a408":e==="pdf"?"#ea5454":e==="txt"?"rgba(0, 0, 0, 0.6)":e==="md"?"#5A96DB":o==="folder"?"#ffd153":""}const m=e=>{e.folderid&&(e.type="folder",e.icon="icon-24gf-folderOpen"),e.filesuffix==="md"&&(e.type="markdown",e.icon="icon-file-markdown1"),e.filesuffix==="txt"&&(e.type="txt",e.icon="icon-wenben1"),e.filesuffix==="xlsx"&&(e.type="excel",e.icon="icon-excel"),e.filesuffix==="docx"&&(e.type="word",e.icon="icon-Word"),e.suffix=e.filesuffix};let c=R(null);const y=(e,o)=>{c.value.showContentMenu(e,o,"recycle")},g=()=>{c.value.hiddenContentMenu()},h=e=>{const o=t.findIndex(l=>l.fileid===e);o!==-1&&t.splice(o,1)},F=e=>{const o=t.findIndex(l=>l.fileid===e);o!==-1&&t.splice(o,1)},v=e=>{console.log("文件已移动到回收站:",e)},C=e=>{console.log("重命名文件索引:",e)};return k(async()=>{try{let{userid:e}=JSON.parse(sessionStorage.getItem("user"));const o=await O({userid:e,state:2});if(!o){console.error("获取回收站文件失败：无响应");return}const{code:l,msg:n,data:s}=o;if(l!==200){console.error("获取回收站文件失败:",n);return}t.length=0,s&&Array.isArray(s)?s.forEach(a=>{m(a),t.push(a)}):console.warn("回收站文件数据格式异常:",s)}catch(e){console.error("加载回收站文件异常:",e)}}),(e,o)=>{const l=b("el-page-header");return f(),d("div",{class:"box",onClick:g},[p(l,{icon:u(N),onBack:o[0]||(o[0]=n=>u(T).back())},{content:_(()=>[V]),default:_(()=>[p(L,{ref_key:"filecontentmenuRef",ref:c,onPutFileToRecycle:v,onRename:C,onDeleteFileFromRecycle:h,onRestoreFileFromRecycle:F},null,512),i("div",j,[(f(!0),d(M,null,S(u(t),(n,s)=>(f(),d("div",{class:"box-main-item",key:s,onContextmenu:A(a=>y(a,s),["prevent","stop"])},[i("i",{"data-fileid":n.fileid,"data-filename":n.filename,"data-filesuffix":n.filesuffix,"data-folderid":n.folderid||"",class:B(["iconfont",n.icon]),style:H({color:x(n.filesuffix,n.type)})},null,14,J),i("span",null,D(n.type==="folder"?n.foldername:n.filename+"."+n.suffix),1)],40,q))),128))])]),_:1},8,["icon"])])}}},Y=w(W,[["__scopeId","data-v-7968d424"]]);export{Y as default};
