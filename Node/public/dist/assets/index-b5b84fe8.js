import{_ as w,l as I,r as R,m as k,a as b,o as c,c as d,d as p,e as x,u,b as r,F as M,j as S,q as A,n as B,C as H,t as D,ad as N,f as T,p as z,h as E}from"./index-24cb8917.js";import{f as L}from"./filecontentmenu-a1b3a350.js";import{a as O}from"./index-71f899e4.js";import"./index-adfc4820.js";const P=l=>(z("data-v-ffffa012"),l=l(),E(),l),V=P(()=>r("span",{class:"text-large font-600 mr-3"}," 回收站 ",-1)),j={class:"mt-4 text-sm font-bold box-main"},q=["onContextmenu"],J=["data-fileid","data-filename","data-filesuffix","data-folderid"],W={__name:"index",setup(l){let t=I([]);function _(e,n){return e==="docx"?"#0f90e3":e==="xlsx"?"#01a408":e==="pdf"?"#ea5454":e==="txt"?"rgba(0, 0, 0, 0.6)":e==="md"?"#5A96DB":n==="folder"?"#ffd153":""}const m=e=>{!e.filesuffix&&e.suffix&&(e.filesuffix=e.suffix),!e.suffix&&e.filesuffix&&(e.suffix=e.filesuffix),e.folderid&&(e.type="folder",e.icon="icon-24gf-folderOpen"),e.filesuffix==="md"&&(e.type="markdown",e.icon="icon-file-markdown1"),e.filesuffix==="txt"&&(e.type="txt",e.icon="icon-wenben1"),e.filesuffix==="xlsx"&&(e.type="excel",e.icon="icon-excel"),e.filesuffix==="docx"&&(e.type="word",e.icon="icon-Word"),e.suffix=e.filesuffix};let i=R(null);const y=(e,n)=>{i.value.showContentMenu(e,n,"recycle")},g=()=>{i.value.hiddenContentMenu()},h=e=>{const n=t.findIndex(f=>f.fileid===e);n!==-1&&t.splice(n,1)},F=e=>{const n=t.findIndex(f=>f.fileid===e);n!==-1&&t.splice(n,1)},v=e=>{console.log("文件已移动到回收站:",e)},C=e=>{console.log("重命名文件索引:",e)};return k(async()=>{try{let{userid:e}=JSON.parse(sessionStorage.getItem("user"));const n=await O({userid:e,state:2});if(!n){console.error("获取回收站文件失败：无响应");return}const{code:f,msg:o,data:s}=n;if(f!==200){console.error("获取回收站文件失败:",o);return}t.length=0,s&&Array.isArray(s)?s.forEach(a=>{m(a),t.push(a)}):console.warn("回收站文件数据格式异常:",s)}catch(e){console.error("加载回收站文件异常:",e)}}),(e,n)=>{const f=b("el-page-header");return c(),d("div",{class:"box",onClick:g},[p(f,{icon:u(N),onBack:n[0]||(n[0]=o=>u(T).back())},{content:x(()=>[V]),default:x(()=>[p(L,{ref_key:"filecontentmenuRef",ref:i,onPutFileToRecycle:v,onRename:C,onDeleteFileFromRecycle:h,onRestoreFileFromRecycle:F},null,512),r("div",j,[(c(!0),d(M,null,S(u(t),(o,s)=>(c(),d("div",{class:"box-main-item",key:s,onContextmenu:A(a=>y(a,s),["prevent","stop"])},[r("i",{"data-fileid":o.fileid,"data-filename":o.filename,"data-filesuffix":o.filesuffix,"data-folderid":o.folderid||"",class:B(["iconfont",o.icon]),style:H({color:_(o.filesuffix,o.type)})},null,14,J),r("span",null,D(o.type==="folder"?o.foldername:o.filename+"."+o.filesuffix),1)],40,q))),128))])]),_:1},8,["icon"])])}}},U=w(W,[["__scopeId","data-v-ffffa012"]]);export{U as default};
