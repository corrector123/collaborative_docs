[2025-06-01 11:54:54 +08:00Z] [INFO] - 开始初始化 node 方法 
[2025-06-01 11:54:54 +08:00Z] [SUCCESS] - Socket Server is running... 
[2025-06-01 11:54:54 +08:00Z] [SUCCESS] - WS 服务初始化成功，连接地址：ws://localhost:9000 
[2025-06-01 11:54:55 +08:00Z] [SUCCESS] - Node Serve is running at http://localhost:5000. 
[2025-06-01 11:54:55 +08:00Z] [INFO] - 连接数据库成功！ 
[2025-06-01 11:58:01 +08:00Z] [INFO] - SQL (direct): SELECT * FROM users WHERE userid='1'&&password='c4ca4238a0b923820dcc509a6f75849b' 
[2025-06-01 11:58:02 +08:00Z] [DEBUG] - [status] 200 [msg] 登录成功 
[2025-06-01 11:58:02 +08:00Z] [INFO] - SQL (direct): SELECT * FROM files WHERE OWNER ='1' AND ISNULL(fileownerfolderid) AND state='1 ORDER BY filetype' 
[2025-06-01 11:58:02 +08:00Z] [INFO] - SQL (direct): SELECT * FROM folders WHERE OWNER ='1' AND state=1 AND ISNULL(parentfolderid) 
[2025-06-01 11:58:02 +08:00Z] [DEBUG] - [status] 200 [msg] 查找成功 
[2025-06-01 11:58:03 +08:00Z] [INFO] - yjs 客户端连接尝试，URL: /?yjs/kMXvDPe2A4kwfc0UTtaNm 
[2025-06-01 11:58:03 +08:00Z] [INFO] - yjs 客户端连接成功: fileid=kMXvDPe2A4kwfc0UTtaNm, wid=hul5hbrpn6t 
[2025-06-01 11:58:03 +08:00Z] [INFO] - 用户连接... 
[2025-06-01 11:58:03 +08:00Z] [INFO] - SQL (direct): SELECT * FROM files WHERE fileid='kMXvDPe2A4kwfc0UTtaNm' AND OWNER ='1' 
[2025-06-01 11:58:03 +08:00Z] [INFO] - SQL (parameterized): SELECT vid, fileid, lasteditor, createtime, description FROM versions WHERE fileid = ? AND description is not null ORDER BY createtime DESC -- Params: ["kMXvDPe2A4kwfc0UTtaNm"] 
[2025-06-01 11:58:03 +08:00Z] [DEBUG] - [status] 200 [msg] 文件查找成功 
[2025-06-01 11:58:03 +08:00Z] [DEBUG] - [status] 200 [msg] 获取版本列表成功 
[2025-06-01 11:58:03 +08:00Z] [INFO] - 用户加入房间 kMXvDPe2A4kwfc0UTtaNm 
[2025-06-01 11:58:03 +08:00Z] [INFO] - SQL (direct): SELECT versions.content FROM files,versions WHERE files.fileid='kMXvDPe2A4kwfc0UTtaNm' AND files.currenthead=versions.vid 
[2025-06-01 11:58:03 +08:00Z] [DEBUG] - [status] 6003 [msg] 参数缺失 
[2025-06-01 11:58:08 +08:00Z] [INFO] - SQL (direct): SELECT * FROM files WHERE OWNER ='1' AND ISNULL(fileownerfolderid) AND state='1 ORDER BY filetype' 
[2025-06-01 11:58:08 +08:00Z] [INFO] - SQL (direct): SELECT * FROM folders WHERE OWNER ='1' AND state=1 AND ISNULL(parentfolderid) 
[2025-06-01 11:58:08 +08:00Z] [DEBUG] - [status] 200 [msg] 查找成功 
[2025-06-01 11:58:10 +08:00Z] [INFO] - SQL (direct): SELECT * FROM files WHERE fileid='fhOPjyXgtzS-N6EheItGI' AND OWNER ='1' 
[2025-06-01 11:58:10 +08:00Z] [DEBUG] - [status] 200 [msg] 文件查找成功 
[2025-06-01 11:58:15 +08:00Z] [INFO] - 用户加入房间 Kyv0pgp-6Tq2ZwBGtBGHx 
[2025-06-01 11:58:15 +08:00Z] [INFO] - SQL (direct): SELECT * FROM files WHERE fileid='Kyv0pgp-6Tq2ZwBGtBGHx' AND OWNER ='1' 
[2025-06-01 11:58:15 +08:00Z] [INFO] - yjs 客户端连接尝试，URL: /?yjs/Kyv0pgp-6Tq2ZwBGtBGHx 
[2025-06-01 11:58:15 +08:00Z] [INFO] - yjs 客户端连接成功: fileid=Kyv0pgp-6Tq2ZwBGtBGHx, wid=lpot0lurt4f 
[2025-06-01 11:58:15 +08:00Z] [INFO] - SQL (parameterized): SELECT vid, fileid, lasteditor, createtime, description FROM versions WHERE fileid = ? AND description is not null ORDER BY createtime DESC -- Params: ["Kyv0pgp-6Tq2ZwBGtBGHx"] 
[2025-06-01 11:58:15 +08:00Z] [DEBUG] - [status] 200 [msg] 文件查找成功 
[2025-06-01 11:58:15 +08:00Z] [DEBUG] - [status] 200 [msg] 获取版本列表成功 
[2025-06-01 11:58:15 +08:00Z] [INFO] - SQL (direct): SELECT versions.content FROM files,versions WHERE files.fileid='Kyv0pgp-6Tq2ZwBGtBGHx' AND files.currenthead=versions.vid 
[2025-06-01 11:58:15 +08:00Z] [DEBUG] - [status] 6003 [msg] 参数缺失 
[2025-06-01 11:58:25 +08:00Z] [INFO] - SQL (direct): SELECT * FROM files WHERE OWNER ='1' AND ISNULL(fileownerfolderid) AND state='1 ORDER BY filetype' 
[2025-06-01 11:58:25 +08:00Z] [INFO] - SQL (direct): SELECT * FROM folders WHERE OWNER ='1' AND state=1 AND ISNULL(parentfolderid) 
[2025-06-01 11:58:25 +08:00Z] [DEBUG] - [status] 200 [msg] 查找成功 
[2025-06-01 11:58:34 +08:00Z] [INFO] - 用户加入房间 kMXvDPe2A4kwfc0UTtaNm 
[2025-06-01 11:58:34 +08:00Z] [INFO] - yjs 客户端连接尝试，URL: /?yjs/kMXvDPe2A4kwfc0UTtaNm 
[2025-06-01 11:58:34 +08:00Z] [INFO] - yjs 客户端连接成功: fileid=kMXvDPe2A4kwfc0UTtaNm, wid=867g8325f78 
[2025-06-01 11:58:34 +08:00Z] [INFO] - SQL (direct): SELECT * FROM files WHERE fileid='kMXvDPe2A4kwfc0UTtaNm' AND OWNER ='1' 
[2025-06-01 11:58:34 +08:00Z] [INFO] - SQL (parameterized): SELECT vid, fileid, lasteditor, createtime, description FROM versions WHERE fileid = ? AND description is not null ORDER BY createtime DESC -- Params: ["kMXvDPe2A4kwfc0UTtaNm"] 
[2025-06-01 11:58:34 +08:00Z] [DEBUG] - [status] 200 [msg] 文件查找成功 
[2025-06-01 11:58:34 +08:00Z] [DEBUG] - [status] 200 [msg] 获取版本列表成功 
[2025-06-01 11:58:42 +08:00Z] [INFO] - SQL (direct): SELECT * FROM users WHERE userid='2'&&password='c81e728d9d4c2f636f067f89cc14862c' 
[2025-06-01 11:58:42 +08:00Z] [DEBUG] - [status] 200 [msg] 登录成功 
[2025-06-01 11:58:43 +08:00Z] [INFO] - SQL (direct): SELECT * FROM files WHERE OWNER ='2' AND ISNULL(fileownerfolderid) AND state='1 ORDER BY filetype' 
[2025-06-01 11:58:43 +08:00Z] [INFO] - SQL (direct): SELECT * FROM folders WHERE OWNER ='2' AND state=1 AND ISNULL(parentfolderid) 
[2025-06-01 11:58:43 +08:00Z] [DEBUG] - [status] 200 [msg] 查找成功 
[2025-06-01 11:58:44 +08:00Z] [INFO] - SQL (direct): SELECT fp.file_owner_id,file_id
         FROM file_permissions fp 
         WHERE fp.user_id = '2' and fp.acceptance=1 
[2025-06-01 11:58:44 +08:00Z] [INFO] - SQL (direct): SELECT * FROM files WHERE fileid='fhOPjyXgtzS-N6EheItGI' AND OWNER ='1' 
[2025-06-01 11:58:44 +08:00Z] [INFO] - SQL (direct): SELECT * FROM files WHERE fileid='kMXvDPe2A4kwfc0UTtaNm' AND OWNER ='1' 
[2025-06-01 11:58:44 +08:00Z] [DEBUG] - [status] 200 [msg] 文件列表获取成功 
[2025-06-01 11:58:44 +08:00Z] [INFO] - SQL (direct): SELECT * FROM file_permissions 
         WHERE user_id = '2' AND file_id = 'fhOPjyXgtzS-N6EheItGI' 
[2025-06-01 11:58:44 +08:00Z] [DEBUG] - [status] 200 [msg] 查询成功 
[2025-06-01 11:58:44 +08:00Z] [INFO] - SQL (parameterized): SELECT vid, fileid, lasteditor, createtime, description FROM versions WHERE fileid = ? AND description is not null ORDER BY createtime DESC -- Params: ["fhOPjyXgtzS-N6EheItGI"] 
[2025-06-01 11:58:44 +08:00Z] [INFO] - SQL (direct): SELECT versions.content FROM files,versions WHERE files.fileid='fhOPjyXgtzS-N6EheItGI' AND files.currenthead=versions.vid 
[2025-06-01 11:58:44 +08:00Z] [DEBUG] - [status] 200 [msg] 获取版本列表成功 
[2025-06-01 11:58:44 +08:00Z] [DEBUG] - [status] 6003 [msg] 参数缺失 
[2025-06-01 11:58:44 +08:00Z] [INFO] - canvas-editor 客户端连接尝试, URL: /?canvas-editor/fhOPjyXgtzS-N6EheItGI?readOnly=true 
[2025-06-01 11:58:44 +08:00Z] [INFO] - canvas-editor 客户端连接成功: fileid=fhOPjyXgtzS-N6EheItGI, wid=584goupoy9x 
[2025-06-01 11:58:44 +08:00Z] [INFO] - 消息广播完成，共发送给 0 个客户端 
[2025-06-01 11:58:44 +08:00Z] [INFO] - 消息广播完成，共发送给 0 个客户端 
[2025-06-01 11:58:45 +08:00Z] [WARN] - yjs 用户关闭连接: fileid=Kyv0pgp-6Tq2ZwBGtBGHx, wid=lpot0lurt4f 
[2025-06-01 11:58:46 +08:00Z] [INFO] - 消息广播完成，共发送给 0 个客户端 
[2025-06-01 11:58:46 +08:00Z] [WARN] - canvas-editor 用户关闭连接: fileid=fhOPjyXgtzS-N6EheItGI, wid=584goupoy9x 
[2025-06-01 11:58:46 +08:00Z] [INFO] - SQL (direct): SELECT fp.file_owner_id,file_id
         FROM file_permissions fp 
         WHERE fp.user_id = '2' and fp.acceptance=1 
[2025-06-01 11:58:46 +08:00Z] [INFO] - SQL (direct): SELECT * FROM files WHERE fileid='fhOPjyXgtzS-N6EheItGI' AND OWNER ='1' 
[2025-06-01 11:58:46 +08:00Z] [INFO] - SQL (direct): SELECT * FROM files WHERE fileid='kMXvDPe2A4kwfc0UTtaNm' AND OWNER ='1' 
[2025-06-01 11:58:46 +08:00Z] [DEBUG] - [status] 200 [msg] 文件列表获取成功 
[2025-06-01 11:58:46 +08:00Z] [INFO] - yjs 客户端连接尝试，URL: /?yjs/Kyv0pgp-6Tq2ZwBGtBGHx 
[2025-06-01 11:58:46 +08:00Z] [INFO] - yjs 客户端连接成功: fileid=Kyv0pgp-6Tq2ZwBGtBGHx, wid=ugiukq2a16 
[2025-06-01 11:58:46 +08:00Z] [INFO] - SQL (direct): SELECT * FROM file_permissions 
         WHERE user_id = '2' AND file_id = 'kMXvDPe2A4kwfc0UTtaNm' 
[2025-06-01 11:58:46 +08:00Z] [DEBUG] - [status] 200 [msg] 查询成功 
[2025-06-01 11:58:46 +08:00Z] [INFO] - 用户连接... 
[2025-06-01 11:58:46 +08:00Z] [INFO] - yjs 客户端连接尝试，URL: /?yjs/kMXvDPe2A4kwfc0UTtaNm 
[2025-06-01 11:58:46 +08:00Z] [INFO] - yjs 客户端连接成功: fileid=kMXvDPe2A4kwfc0UTtaNm, wid=3qwtdufzyjj 
[2025-06-01 11:58:46 +08:00Z] [INFO] - SQL (direct): SELECT * FROM files WHERE fileid='kMXvDPe2A4kwfc0UTtaNm?file_id=kMXvDPe2A4kwfc0UTtaNm&filename=README&filetype=markdown&filesuffix=md&file_owner=1&createtime=2025-05-26T11:45:53.000Z&readOnly=false' AND OWNER ='2' 
[2025-06-01 11:58:46 +08:00Z] [INFO] - SQL (parameterized): SELECT vid, fileid, lasteditor, createtime, description FROM versions WHERE fileid = ? AND description is not null ORDER BY createtime DESC -- Params: ["kMXvDPe2A4kwfc0UTtaNm"] 
[2025-06-01 11:58:46 +08:00Z] [DEBUG] - [status] 200 [msg] 文件查找成功 
[2025-06-01 11:58:46 +08:00Z] [DEBUG] - [status] 200 [msg] 获取版本列表成功 
[2025-06-01 11:58:46 +08:00Z] [INFO] - 用户加入房间 kMXvDPe2A4kwfc0UTtaNm?file_id=kMXvDPe2A4kwfc0UTtaNm&filename=README&filetype=markdown&filesuffix=md&file_owner=1&createtime=2025-05-26T11:45:53.000Z&readOnly=false 
[2025-06-01 11:58:49 +08:00Z] [INFO] - 当前连接的客户端: [] 
[2025-06-01 11:58:50 +08:00Z] [WARN] - yjs 用户关闭连接: fileid=kMXvDPe2A4kwfc0UTtaNm, wid=3qwtdufzyjj 
[2025-06-01 11:58:51 +08:00Z] [INFO] - SQL (direct): SELECT * FROM files WHERE OWNER ='1' AND ISNULL(fileownerfolderid) AND state='1 ORDER BY filetype' 
[2025-06-01 11:58:51 +08:00Z] [INFO] - SQL (direct): SELECT * FROM folders WHERE OWNER ='1' AND state=1 AND ISNULL(parentfolderid) 
[2025-06-01 11:58:51 +08:00Z] [DEBUG] - [status] 200 [msg] 查找成功 
[2025-06-01 11:58:53 +08:00Z] [INFO] - SQL (direct): SELECT * FROM messages WHERE recipient_id='1' 
[2025-06-01 11:58:53 +08:00Z] [DEBUG] - [status] 200 [msg] 消息列表获取成功 
[2025-06-01 11:58:54 +08:00Z] [INFO] - SQL (direct): SELECT * FROM files WHERE OWNER ='1' AND ISNULL(fileownerfolderid) AND state='1 ORDER BY filetype' 
[2025-06-01 11:58:54 +08:00Z] [INFO] - SQL (direct): SELECT * FROM folders WHERE OWNER ='1' AND state=1 AND ISNULL(parentfolderid) 
[2025-06-01 11:58:54 +08:00Z] [DEBUG] - [status] 200 [msg] 查找成功 
[2025-06-01 11:58:54 +08:00Z] [INFO] - 当前连接的客户端: [] 
[2025-06-01 11:58:56 +08:00Z] [INFO] - SQL (direct): SELECT * FROM messages WHERE recipient_id='1' 
[2025-06-01 11:58:56 +08:00Z] [DEBUG] - [status] 200 [msg] 消息列表获取成功 
[2025-06-01 11:58:59 +08:00Z] [INFO] - SQL (direct): SELECT * FROM files WHERE OWNER ='1' AND ISNULL(fileownerfolderid) AND state='1 ORDER BY filetype' 
[2025-06-01 11:58:59 +08:00Z] [INFO] - SQL (direct): SELECT * FROM folders WHERE OWNER ='1' AND state=1 AND ISNULL(parentfolderid) 
[2025-06-01 11:58:59 +08:00Z] [DEBUG] - [status] 200 [msg] 查找成功 
[2025-06-01 11:58:59 +08:00Z] [INFO] - 当前连接的客户端: [] 
[2025-06-01 11:59:03 +08:00Z] [INFO] - SQL (direct): SELECT * FROM users WHERE userid='1'&&password='c4ca4238a0b923820dcc509a6f75849b' 
[2025-06-01 11:59:03 +08:00Z] [DEBUG] - [status] 200 [msg] 登录成功 
[2025-06-01 11:59:03 +08:00Z] [INFO] - SQL (direct): SELECT * FROM files WHERE OWNER ='1' AND ISNULL(fileownerfolderid) AND state='1 ORDER BY filetype' 
[2025-06-01 11:59:03 +08:00Z] [INFO] - SQL (direct): SELECT * FROM folders WHERE OWNER ='1' AND state=1 AND ISNULL(parentfolderid) 
[2025-06-01 11:59:03 +08:00Z] [DEBUG] - [status] 200 [msg] 查找成功 
[2025-06-01 11:59:04 +08:00Z] [INFO] - 当前连接的客户端: [] 
[2025-06-01 11:59:06 +08:00Z] [INFO] - SQL (parameterized): SELECT vid, fileid, lasteditor, createtime, description FROM versions WHERE fileid = ? AND description is not null ORDER BY createtime DESC -- Params: ["e3Lq8IgfRWml7dMCtiQLW"] 
[2025-06-01 11:59:06 +08:00Z] [INFO] - SQL (direct): SELECT versions.content FROM files,versions WHERE files.fileid='e3Lq8IgfRWml7dMCtiQLW' AND files.currenthead=versions.vid 
[2025-06-01 11:59:06 +08:00Z] [DEBUG] - [status] 200 [msg] 获取版本列表成功 
[2025-06-01 11:59:06 +08:00Z] [DEBUG] - [status] 200 [msg] 查找成功 
[2025-06-01 11:59:06 +08:00Z] [INFO] - canvas-editor 客户端连接尝试, URL: /?canvas-editor/e3Lq8IgfRWml7dMCtiQLW 
[2025-06-01 11:59:06 +08:00Z] [INFO] - canvas-editor 客户端连接成功: fileid=e3Lq8IgfRWml7dMCtiQLW, wid=w9mqtjvqt1f 
[2025-06-01 11:59:06 +08:00Z] [INFO] - 消息广播完成，共发送给 0 个客户端 
[2025-06-01 11:59:06 +08:00Z] [INFO] - 消息广播完成，共发送给 0 个客户端 
[2025-06-01 11:59:09 +08:00Z] [INFO] - 当前连接的客户端: [{"wid":"w9mqtjvqt1f","fileid":"e3Lq8IgfRWml7dMCtiQLW"}] 
[2025-06-01 11:59:10 +08:00Z] [INFO] - SQL (parameterized): SELECT vid, fileid, lasteditor, createtime, snapshot, description FROM versions WHERE vid = ? -- Params: ["4lLR--qLAKHoty2kFiqq5"] 
[2025-06-01 11:59:10 +08:00Z] [DEBUG] - [status] 200 [msg] 获取版本成功 
[2025-06-01 11:59:10 +08:00Z] [INFO] - SQL (direct): SELECT * FROM files WHERE fileid='e3Lq8IgfRWml7dMCtiQLW' 
[2025-06-01 11:59:10 +08:00Z] [INFO] - SQL (parameterized): SELECT * FROM versions WHERE vid = ? -- Params: ["RXcgKXMnB2aRiocxwn_ww"] 
[2025-06-01 11:59:10 +08:00Z] [INFO] - [saveVersion] 超过版本控制时限，创建新版本，fileid: e3Lq8IgfRWml7dMCtiQLW 
[2025-06-01 11:59:10 +08:00Z] [INFO] - SQL (parameterized): INSERT INTO versions(vid, fileid, content, lasteditor) VALUES(?, ?, ?, ?) -- Params: ["HuAl_FVh8XRJeMWBCvSex","e3Lq8IgfRWml7dMCtiQLW","{\"version\":\"0.9.49\",\"width\":794,\"height\":1123,\"margins\":[100,120,100,120],\"watermark\":{\"data\":\"CANVAS-EDITOR\",\"color\":\"#AEB5C0\",\"opacity\":0.3,\"size\":120,\"font\":\"Yahei\"},\"data\":{\"header\":[],\"main\":[{\"value\":\"gasfgd\",\"size\":26,\"bold\":true}],\"footer\":[]}}","1"] 
[2025-06-01 11:59:10 +08:00Z] [INFO] - SQL (direct): UPDATE files SET currenthead='HuAl_FVh8XRJeMWBCvSex' WHERE fileid='e3Lq8IgfRWml7dMCtiQLW' 
[2025-06-01 11:59:10 +08:00Z] [DEBUG] - [status] 200 [msg] 文件更新成功 
[2025-06-01 11:59:10 +08:00Z] [INFO] - SQL (parameterized): SELECT vid, fileid, lasteditor, createtime, description FROM versions WHERE fileid = ? AND description is not null ORDER BY createtime DESC -- Params: ["e3Lq8IgfRWml7dMCtiQLW"] 
[2025-06-01 11:59:10 +08:00Z] [DEBUG] - [status] 200 [msg] 获取版本列表成功 
[2025-06-01 11:59:11 +08:00Z] [INFO] - 当前连接的客户端: [{"wid":"w9mqtjvqt1f","fileid":"e3Lq8IgfRWml7dMCtiQLW"}] 
[2025-06-01 11:59:12 +08:00Z] [INFO] - 消息广播完成，共发送给 0 个客户端 
[2025-06-01 11:59:12 +08:00Z] [WARN] - canvas-editor 用户关闭连接: fileid=e3Lq8IgfRWml7dMCtiQLW, wid=w9mqtjvqt1f 
[2025-06-01 11:59:12 +08:00Z] [INFO] - SQL (direct): SELECT * FROM files WHERE OWNER ='1' AND ISNULL(fileownerfolderid) AND state='1 ORDER BY filetype' 
[2025-06-01 11:59:12 +08:00Z] [INFO] - SQL (direct): SELECT * FROM folders WHERE OWNER ='1' AND state=1 AND ISNULL(parentfolderid) 
[2025-06-01 11:59:12 +08:00Z] [DEBUG] - [status] 200 [msg] 查找成功 
[2025-06-01 11:59:13 +08:00Z] [INFO] - SQL (parameterized): SELECT vid, fileid, lasteditor, createtime, description FROM versions WHERE fileid = ? AND description is not null ORDER BY createtime DESC -- Params: ["e3Lq8IgfRWml7dMCtiQLW"] 
[2025-06-01 11:59:13 +08:00Z] [INFO] - SQL (direct): SELECT versions.content FROM files,versions WHERE files.fileid='e3Lq8IgfRWml7dMCtiQLW' AND files.currenthead=versions.vid 
[2025-06-01 11:59:13 +08:00Z] [DEBUG] - [status] 200 [msg] 获取版本列表成功 
[2025-06-01 11:59:13 +08:00Z] [DEBUG] - [status] 200 [msg] 查找成功 
[2025-06-01 11:59:13 +08:00Z] [INFO] - canvas-editor 客户端连接尝试, URL: /?canvas-editor/e3Lq8IgfRWml7dMCtiQLW 
[2025-06-01 11:59:13 +08:00Z] [INFO] - canvas-editor 客户端连接成功: fileid=e3Lq8IgfRWml7dMCtiQLW, wid=0vt1hk59ilye 
[2025-06-01 11:59:13 +08:00Z] [INFO] - 消息广播完成，共发送给 0 个客户端 
[2025-06-01 11:59:13 +08:00Z] [INFO] - 消息广播完成，共发送给 0 个客户端 
[2025-06-01 11:59:14 +08:00Z] [INFO] - 当前连接的客户端: [{"wid":"0vt1hk59ilye","fileid":"e3Lq8IgfRWml7dMCtiQLW"}] 
[2025-06-01 11:59:15 +08:00Z] [INFO] - 消息广播完成，共发送给 0 个客户端 
[2025-06-01 11:59:15 +08:00Z] [WARN] - canvas-editor 用户关闭连接: fileid=e3Lq8IgfRWml7dMCtiQLW, wid=0vt1hk59ilye 
[2025-06-01 11:59:15 +08:00Z] [INFO] - SQL (direct): SELECT * FROM files WHERE OWNER ='1' AND ISNULL(fileownerfolderid) AND state='1 ORDER BY filetype' 
[2025-06-01 11:59:15 +08:00Z] [INFO] - SQL (direct): SELECT * FROM folders WHERE OWNER ='1' AND state=1 AND ISNULL(parentfolderid) 
[2025-06-01 11:59:15 +08:00Z] [DEBUG] - [status] 200 [msg] 查找成功 
[2025-06-01 11:59:16 +08:00Z] [INFO] - SQL (parameterized): SELECT vid, fileid, lasteditor, createtime, description FROM versions WHERE fileid = ? AND description is not null ORDER BY createtime DESC -- Params: ["fhOPjyXgtzS-N6EheItGI"] 
[2025-06-01 11:59:16 +08:00Z] [INFO] - SQL (direct): SELECT versions.content FROM files,versions WHERE files.fileid='fhOPjyXgtzS-N6EheItGI' AND files.currenthead=versions.vid 
[2025-06-01 11:59:16 +08:00Z] [DEBUG] - [status] 200 [msg] 获取版本列表成功 
[2025-06-01 11:59:16 +08:00Z] [DEBUG] - [status] 6003 [msg] 参数缺失 
[2025-06-01 11:59:16 +08:00Z] [INFO] - canvas-editor 客户端连接尝试, URL: /?canvas-editor/fhOPjyXgtzS-N6EheItGI 
[2025-06-01 11:59:16 +08:00Z] [INFO] - canvas-editor 客户端连接成功: fileid=fhOPjyXgtzS-N6EheItGI, wid=n3nqps4sra 
[2025-06-01 11:59:16 +08:00Z] [INFO] - 消息广播完成，共发送给 0 个客户端 
[2025-06-01 11:59:16 +08:00Z] [INFO] - 消息广播完成，共发送给 0 个客户端 
[2025-06-01 11:59:16 +08:00Z] [INFO] - 当前连接的客户端: [{"wid":"n3nqps4sra","fileid":"fhOPjyXgtzS-N6EheItGI"}] 
[2025-06-01 11:59:18 +08:00Z] [WARN] - yjs 用户关闭连接: fileid=Kyv0pgp-6Tq2ZwBGtBGHx, wid=ugiukq2a16 
[2025-06-01 11:59:18 +08:00Z] [INFO] - yjs 客户端连接尝试，URL: /?yjs/Kyv0pgp-6Tq2ZwBGtBGHx 
[2025-06-01 11:59:18 +08:00Z] [INFO] - yjs 客户端连接成功: fileid=Kyv0pgp-6Tq2ZwBGtBGHx, wid=1c9rajyvgd3 
[2025-06-01 11:59:18 +08:00Z] [INFO] - 当前连接的客户端: [{"wid":"n3nqps4sra","fileid":"fhOPjyXgtzS-N6EheItGI"}] 
[2025-06-01 11:59:19 +08:00Z] [INFO] - SQL (parameterized): SELECT vid, fileid, lasteditor, createtime, snapshot, description FROM versions WHERE vid = ? -- Params: ["15sZ1EHAKwxYlhDHjchak"] 
[2025-06-01 11:59:19 +08:00Z] [DEBUG] - [status] 200 [msg] 获取版本成功 
[2025-06-01 11:59:19 +08:00Z] [INFO] - SQL (direct): SELECT * FROM files WHERE fileid='fhOPjyXgtzS-N6EheItGI' 
[2025-06-01 11:59:19 +08:00Z] [INFO] - SQL (parameterized): SELECT * FROM versions WHERE vid = ? -- Params: ["[object Object]"] 
[2025-06-01 11:59:19 +08:00Z] [ERROR] - [saveVersion] 当前文件的版本头指向的版本未找到，fileid: fhOPjyXgtzS-N6EheItGI, currenthead: [object Object] 
[2025-06-01 11:59:19 +08:00Z] [WARN] - [saveVersion] 未找到currenthead [object Object] 的版本信息，将创建新版本 
[2025-06-01 11:59:19 +08:00Z] [INFO] - SQL (parameterized): INSERT INTO versions(vid, fileid, content, lasteditor) VALUES(?, ?, ?, ?) -- Params: ["p7GBjEoEGvtEOrwhEmy_k","fhOPjyXgtzS-N6EheItGI","{\"version\":\"0.9.49\",\"width\":794,\"height\":1123,\"margins\":[100,120,100,120],\"watermark\":{\"data\":\"CANVAS-EDITOR\",\"color\":\"#AEB5C0\",\"opacity\":0.3,\"size\":120,\"font\":\"Yahei\"},\"data\":{\"header\":[],\"main\":[{\"value\":\"helloworld-\\n\"}],\"footer\":[]}}","1"] 
[2025-06-01 11:59:20 +08:00Z] [INFO] - 当前连接的客户端: [{"wid":"n3nqps4sra","fileid":"fhOPjyXgtzS-N6EheItGI"}] 
[2025-06-01 11:59:20 +08:00Z] [INFO] - SQL (direct): UPDATE files SET currenthead='p7GBjEoEGvtEOrwhEmy_k' WHERE fileid='fhOPjyXgtzS-N6EheItGI' 
[2025-06-01 11:59:20 +08:00Z] [DEBUG] - [status] 200 [msg] 文件更新成功 
[2025-06-01 11:59:20 +08:00Z] [INFO] - SQL (parameterized): SELECT vid, fileid, lasteditor, createtime, description FROM versions WHERE fileid = ? AND description is not null ORDER BY createtime DESC -- Params: ["fhOPjyXgtzS-N6EheItGI"] 
[2025-06-01 11:59:20 +08:00Z] [DEBUG] - [status] 200 [msg] 获取版本列表成功 
[2025-06-01 11:59:21 +08:00Z] [INFO] - SQL (parameterized): SELECT vid, fileid, lasteditor, createtime, snapshot, description FROM versions WHERE vid = ? -- Params: ["15sZ1EHAKwxYlhDHjchak"] 
[2025-06-01 11:59:21 +08:00Z] [DEBUG] - [status] 200 [msg] 获取版本成功 
[2025-06-01 11:59:21 +08:00Z] [INFO] - 当前连接的客户端: [{"wid":"n3nqps4sra","fileid":"fhOPjyXgtzS-N6EheItGI"}] 
[2025-06-01 11:59:21 +08:00Z] [INFO] - 当前连接的客户端: [{"wid":"n3nqps4sra","fileid":"fhOPjyXgtzS-N6EheItGI"}] 
[2025-06-01 11:59:22 +08:00Z] [INFO] - SQL (parameterized): SELECT vid, fileid, lasteditor, createtime, snapshot, description FROM versions WHERE vid = ? -- Params: ["D5ca7mMw-RiwLd4iFOmN6"] 
[2025-06-01 11:59:22 +08:00Z] [DEBUG] - [status] 200 [msg] 获取版本成功 
[2025-06-01 11:59:23 +08:00Z] [INFO] - 当前连接的客户端: [{"wid":"n3nqps4sra","fileid":"fhOPjyXgtzS-N6EheItGI"}] 
[2025-06-01 11:59:25 +08:00Z] [INFO] - 当前连接的客户端: [{"wid":"n3nqps4sra","fileid":"fhOPjyXgtzS-N6EheItGI"}] 
[2025-06-01 11:59:25 +08:00Z] [INFO] - 消息广播完成，共发送给 0 个客户端 
[2025-06-01 11:59:25 +08:00Z] [WARN] - canvas-editor 用户关闭连接: fileid=fhOPjyXgtzS-N6EheItGI, wid=n3nqps4sra 
[2025-06-01 11:59:25 +08:00Z] [INFO] - SQL (direct): SELECT * FROM files WHERE OWNER ='1' AND ISNULL(fileownerfolderid) AND state='1 ORDER BY filetype' 
[2025-06-01 11:59:25 +08:00Z] [INFO] - SQL (direct): SELECT * FROM folders WHERE OWNER ='1' AND state=1 AND ISNULL(parentfolderid) 
[2025-06-01 11:59:25 +08:00Z] [DEBUG] - [status] 200 [msg] 查找成功 
[2025-06-01 11:59:26 +08:00Z] [INFO] - 当前连接的客户端: [] 
[2025-06-01 11:59:26 +08:00Z] [INFO] - 当前连接的客户端: [] 
[2025-06-01 11:59:28 +08:00Z] [INFO] - 当前连接的客户端: [] 
[2025-06-01 11:59:30 +08:00Z] [INFO] - 当前连接的客户端: [] 
[2025-06-01 11:59:31 +08:00Z] [INFO] - 当前连接的客户端: [] 
[2025-06-01 11:59:31 +08:00Z] [INFO] - 当前连接的客户端: [] 
[2025-06-01 11:59:33 +08:00Z] [INFO] - 当前连接的客户端: [] 
[2025-06-01 11:59:35 +08:00Z] [INFO] - 当前连接的客户端: [] 
[2025-06-01 11:59:36 +08:00Z] [INFO] - 当前连接的客户端: [] 
[2025-06-01 11:59:36 +08:00Z] [INFO] - 当前连接的客户端: [] 
[2025-06-01 11:59:38 +08:00Z] [INFO] - 当前连接的客户端: [] 
[2025-06-01 11:59:40 +08:00Z] [INFO] - 当前连接的客户端: [] 
[2025-06-01 11:59:41 +08:00Z] [INFO] - 当前连接的客户端: [] 
[2025-06-01 11:59:41 +08:00Z] [INFO] - 当前连接的客户端: [] 
[2025-06-01 11:59:43 +08:00Z] [INFO] - 当前连接的客户端: [] 
[2025-06-01 11:59:45 +08:00Z] [INFO] - 当前连接的客户端: [] 
[2025-06-01 11:59:46 +08:00Z] [INFO] - 当前连接的客户端: [] 
[2025-06-01 11:59:46 +08:00Z] [INFO] - 当前连接的客户端: [] 
[2025-06-01 11:59:48 +08:00Z] [INFO] - 当前连接的客户端: [] 
[2025-06-01 11:59:50 +08:00Z] [INFO] - 当前连接的客户端: [] 
[2025-06-01 11:59:50 +08:00Z] [INFO] - SQL (direct): SELECT fp.file_owner_id,file_id
         FROM file_permissions fp 
         WHERE fp.user_id = '1' and fp.acceptance=1 
[2025-06-01 11:59:50 +08:00Z] [DEBUG] - [status] 200 [msg] 文件列表获取成功 
[2025-06-01 11:59:50 +08:00Z] [INFO] - SQL (direct): SELECT *  FROM filestates AS fs,files AS fl 
    WHERE fs.editor='1' AND fl.fileid=fs.fileid 
[2025-06-01 11:59:50 +08:00Z] [DEBUG] - [status] 200 [msg] 查找成功 
[2025-06-01 11:59:51 +08:00Z] [WARN] - yjs 用户关闭连接: fileid=Kyv0pgp-6Tq2ZwBGtBGHx, wid=1c9rajyvgd3 
[2025-06-01 11:59:51 +08:00Z] [INFO] - yjs 客户端连接尝试，URL: /?yjs/Kyv0pgp-6Tq2ZwBGtBGHx 
[2025-06-01 11:59:51 +08:00Z] [INFO] - yjs 客户端连接成功: fileid=Kyv0pgp-6Tq2ZwBGtBGHx, wid=4hd5m0kvmwp 
[2025-06-01 11:59:51 +08:00Z] [INFO] - 当前连接的客户端: [] 
[2025-06-01 11:59:51 +08:00Z] [INFO] - SQL (direct): SELECT * FROM messages WHERE recipient_id='1' 
[2025-06-01 11:59:51 +08:00Z] [DEBUG] - [status] 200 [msg] 消息列表获取成功 
[2025-06-01 11:59:51 +08:00Z] [INFO] - 当前连接的客户端: [] 
[2025-06-01 11:59:52 +08:00Z] [INFO] - SQL (direct): SELECT * FROM files WHERE OWNER ='1' AND ISNULL(fileownerfolderid) AND state='1 ORDER BY filetype' 
[2025-06-01 11:59:52 +08:00Z] [INFO] - SQL (direct): SELECT * FROM folders WHERE OWNER ='1' AND state=1 AND ISNULL(parentfolderid) 
[2025-06-01 11:59:52 +08:00Z] [DEBUG] - [status] 200 [msg] 查找成功 
[2025-06-01 11:59:53 +08:00Z] [INFO] - 当前连接的客户端: [] 
[2025-06-01 11:59:53 +08:00Z] [INFO] - SQL (direct): SELECT *  FROM filestates AS fs,files AS fl 
    WHERE fs.editor='1' AND fl.fileid=fs.fileid 
[2025-06-01 11:59:53 +08:00Z] [DEBUG] - [status] 200 [msg] 查找成功 
[2025-06-01 11:59:54 +08:00Z] [INFO] - SQL (direct): SELECT * FROM files WHERE OWNER ='1' AND ISNULL(fileownerfolderid) AND state='1 ORDER BY filetype' 
[2025-06-01 11:59:54 +08:00Z] [INFO] - SQL (direct): SELECT * FROM folders WHERE OWNER ='1' AND state=1 AND ISNULL(parentfolderid) 
[2025-06-01 11:59:54 +08:00Z] [DEBUG] - [status] 200 [msg] 查找成功 
[2025-06-01 11:59:55 +08:00Z] [INFO] - 当前连接的客户端: [] 
[2025-06-01 11:59:56 +08:00Z] [INFO] - 当前连接的客户端: [] 
[2025-06-01 11:59:56 +08:00Z] [INFO] - 当前连接的客户端: [] 
[2025-06-01 11:59:58 +08:00Z] [INFO] - 当前连接的客户端: [] 
[2025-06-02 12:00:00 +08:00Z] [INFO] - 当前连接的客户端: [] 
