import{_ as y,r as _,J as C,m as k,g as l,a as c,o as x,c as S,d as i,e as r,b as a,n as d,t as F,C as N,f as $,y as E}from"./index-06db8be3.js";import{c as I}from"./share-dedf7f0d.js";import{f as B}from"./index-6edb6d43.js";import"./index-93727b79.js";const J={class:"fileName"},M={class:"fileName-title"},O=["onClick"],z={class:"opt"},T=["onClick"],V=["onClick"],j=["onClick"],q={__name:"index",setup(A){_(!1),_(0);const p={txt:"icon-wenben",excel:"icon-excel",word:"icon-Word",markdown:"icon-file-markdown1",pdf:"icon-pdf1"},u=()=>{},m=e=>$.push({path:`/edit/${e.fileid}`,query:e}),v=e=>{let{username:o}=JSON.parse(sessionStorage.getItem("user")),n=I(o,e.fileid,e.filename+"."+e.filesuffix);h(n)},h=e=>{if(navigator.clipboard)navigator.clipboard.writeText(e);else{var o=document.createElement("textarea");document.body.appendChild(o),o.style.position="fixed",o.style.clip="rect(0 0 0 0)",o.style.top="10px",o.value=e,o.select(),document.execCommand("copy",!0),document.body.removeChild(o)}E.success("分享链接已经复制到粘贴板")},f=async(e,o)=>{if(o==="top"&&(e.top=!e.top),o==="favor"){const n=JSON.parse(sessionStorage.getItem("user"));await B({userid:n.userid,fileid:e.fileid,favor:"0"}),await l.dispatch("fetchFavorFiles")}},g=C(()=>l.state.favorFiles.filter(e=>e.favor==="1"));return k(async()=>{await l.dispatch("fetchFavorFiles")}),(e,o)=>{const n=c("el-table-column"),b=c("el-table"),w=c("el-pagination");return x(),S("div",null,[i(b,{data:g.value,onSelectionChange:u},{default:r(()=>[i(n,{type:"selection",width:"55"}),i(n,{label:"文件名"},{default:r(t=>[a("div",J,[a("div",M,[a("i",{class:d(["iconfont",p[t.row.filetype]])},null,2),a("span",{onClick:s=>m(t.row)},F(t.row.filename+"."+t.row.filesuffix),9,O)])])]),_:1}),i(n,{prop:"owner",label:"拥有者"}),i(n,{prop:"createtime",label:"日期"}),i(n,{fixed:"right",align:"right"},{default:r(t=>[a("div",z,[a("i",{class:"iconfont icon-lianjie",onClick:s=>v(t.row)},null,8,T),a("i",{class:d(["iconfont",t.row.favor?"icon-shoucang1":"icon-shoucang"]),onClick:s=>f(t.row,"favor")},null,10,V),a("i",{style:N({display:t.row.top?"block":""}),class:d(["iconfont",t.row.top?"icon-tuding":"icon-tuding1"]),onClick:s=>f(t.row,"top")},null,14,j)])]),_:1})]),_:1},8,["data"]),i(w,{background:"",layout:"prev, pager, next",total:30})])}}},G=y(q,[["__scopeId","data-v-5a2b1bb6"]]);export{G as default};
