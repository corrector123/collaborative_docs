import{_ as C,m as I,r as R,q as k,M as b,a as M,o as c,c as d,d as p,e as x,u,b as r,F as S,j as A,v as B,n as H,I as D,t as N,aq as T,f as q,p as z,h as E}from"./index-f2f25b67.js";import{f as L}from"./filecontentmenu-d4ed1d4e.js";const O=l=>(z("data-v-ffffa012"),l=l(),E(),l),P=O(()=>r("span",{class:"text-large font-600 mr-3"}," 回收站 ",-1)),V={class:"mt-4 text-sm font-bold box-main"},j=["onContextmenu"],J=["data-fileid","data-filename","data-filesuffix","data-folderid"],W={__name:"index",setup(l){let t=I([]);function _(e,n){return e==="docx"?"#0f90e3":e==="xlsx"?"#01a408":e==="pdf"?"#ea5454":e==="txt"?"rgba(0, 0, 0, 0.6)":e==="md"?"#5A96DB":n==="folder"?"#ffd153":""}const m=e=>{!e.filesuffix&&e.suffix&&(e.filesuffix=e.suffix),!e.suffix&&e.filesuffix&&(e.suffix=e.filesuffix),e.folderid&&(e.type="folder",e.icon="icon-24gf-folderOpen"),e.filesuffix==="md"&&(e.type="markdown",e.icon="icon-file-markdown1"),e.filesuffix==="txt"&&(e.type="txt",e.icon="icon-wenben1"),e.filesuffix==="xlsx"&&(e.type="excel",e.icon="icon-excel"),e.filesuffix==="docx"&&(e.type="word",e.icon="icon-Word"),e.suffix=e.filesuffix};let i=R(null);const y=(e,n)=>{i.value.showContentMenu(e,n,"recycle")},g=()=>{i.value.hiddenContentMenu()},h=e=>{const n=t.findIndex(f=>f.fileid===e);n!==-1&&t.splice(n,1)},F=e=>{const n=t.findIndex(f=>f.fileid===e);n!==-1&&t.splice(n,1)},v=e=>{console.log("文件已移动到回收站:",e)},w=e=>{console.log("重命名文件索引:",e)};return k(async()=>{try{let{userid:e}=JSON.parse(sessionStorage.getItem("user"));const n=await b({userid:e,state:2});if(!n){console.error("获取回收站文件失败：无响应");return}const{code:f,msg:o,data:s}=n;if(f!==200){console.error("获取回收站文件失败:",o);return}t.length=0,s&&Array.isArray(s)?s.forEach(a=>{m(a),t.push(a)}):console.warn("回收站文件数据格式异常:",s)}catch(e){console.error("加载回收站文件异常:",e)}}),(e,n)=>{const f=M("el-page-header");return c(),d("div",{class:"box",onClick:g},[p(f,{icon:u(T),onBack:n[0]||(n[0]=o=>u(q).back())},{content:x(()=>[P]),default:x(()=>[p(L,{ref_key:"filecontentmenuRef",ref:i,onPutFileToRecycle:v,onRename:w,onDeleteFileFromRecycle:h,onRestoreFileFromRecycle:F},null,512),r("div",V,[(c(!0),d(S,null,A(u(t),(o,s)=>(c(),d("div",{class:"box-main-item",key:s,onContextmenu:B(a=>y(a,s),["prevent","stop"])},[r("i",{"data-fileid":o.fileid,"data-filename":o.filename,"data-filesuffix":o.filesuffix,"data-folderid":o.folderid||"",class:H(["iconfont",o.icon]),style:D({color:_(o.filesuffix,o.type)})},null,14,J),r("span",null,N(o.type==="folder"?o.foldername:o.filename+"."+o.filesuffix),1)],40,j))),128))])]),_:1},8,["icon"])])}}},K=C(W,[["__scopeId","data-v-ffffa012"]]);export{K as default};
