import{_ as b,r,l as w,f as t,a as u,o as A,h as q,e as a,u as o,C as N,b as m,d as i,x as l,t as c,v as f}from"./index-2dae8f78.js";import{b as P}from"./index-6b46918e.js";import{A as S}from"./index-74b89282.js";import"./index-1adbd7d5.js";const B={class:"username"},M={class:"dialog-footer"},T={__name:"index",setup(D){let n=r(!0),v=()=>{n.value=!1,t.push("/")},d=r(""),y=r(""),g=r(""),_=r(""),p=r(""),k=async()=>{JSON.parse(sessionStorage.getItem("user"));try{const s=await P({sender_Id:p.value,fileId:d.value,permissionType:_.value});if(s.code!==200)return f.error(s.msg);const e=await S({userid:0,targetId:p.value,file_id:d.value});if(e.code!==200)return f.error(e.msg);f.success(e.msg)}catch(s){throw console.error("API调用出错:",s),s}await t.push("/")};return w(()=>{p.value=t.currentRoute.value.query.userId,d.value=t.currentRoute.value.params.fileid,g.value=t.currentRoute.value.query.filename,y.value=t.currentRoute.value.query.username,_.value=t.currentRoute.value.query.permission}),(s,e)=>{const R=u("el-divider"),I=u("el-link"),x=u("el-button"),V=u("el-dialog");return A(),q(V,{onClose:o(v),modelValue:o(n),"onUpdate:modelValue":e[0]||(e[0]=C=>N(n)?n.value=C:n=C),title:"邀请加入编辑",width:"30%"},{footer:a(()=>[m("span",M,[i(x,{onClick:o(v)},{default:a(()=>e[3]||(e[3]=[l("取消")])),_:1,__:[3]},8,["onClick"]),i(x,{type:"primary",onClick:o(k)},{default:a(()=>e[4]||(e[4]=[l(" 加入 ")])),_:1,__:[4]},8,["onClick"])])]),default:a(()=>[m("span",B,c(o(y)),1),i(R),m("span",null,[e[1]||(e[1]=l(" 邀请你以")),i(I,{type:"primary"},{default:a(()=>[l(c(o(_)),1)]),_:1}),e[2]||(e[2]=l("身份加入 ")),i(I,{type:"primary"},{default:a(()=>[l(c(o(g)),1)]),_:1})])]),_:1},8,["onClose","modelValue"])}}},h=b(T,[["__scopeId","data-v-e1720fa0"]]);export{h as default};
