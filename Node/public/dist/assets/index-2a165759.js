import{_ as V,r as s,m as w,f as e,a as u,o as A,i as b,e as r,u as t,H as q,b as p,d as i,z as l,t as m,y as f}from"./index-7a9b2843.js";import{c as N}from"./index-2ba7978a.js";import{A as P}from"./index-088f85c9.js";import"./index-5d79c569.js";const S={class:"username"},B={class:"dialog-footer"},M={__name:"index",setup(T){let n=s(!0),v=()=>{n.value=!1,e.push("/")},c=s(""),y=s(""),g=s(""),d=s(""),_=s(""),C=async()=>{JSON.parse(sessionStorage.getItem("user"));try{const a=await N({sender_Id:_.value,fileId:c.value,permissionType:d.value});if(a.code!==200)return f.error(a.msg);const o=await P({userid:0,targetId:_.value,file_id:c.value});if(o.code!==200)return f.error(o.msg);f.success(o.msg)}catch(a){throw console.error("API调用出错:",a),a}await e.push("/")};return w(()=>{_.value=e.currentRoute.value.query.userId,c.value=e.currentRoute.value.params.fileid,g.value=e.currentRoute.value.query.filename,y.value=e.currentRoute.value.query.username,d.value=e.currentRoute.value.query.permission}),(a,o)=>{const R=u("el-divider"),I=u("el-link"),x=u("el-button"),h=u("el-dialog");return A(),b(h,{onClose:t(v),modelValue:t(n),"onUpdate:modelValue":o[0]||(o[0]=k=>q(n)?n.value=k:n=k),title:"邀请加入编辑",width:"30%"},{footer:r(()=>[p("span",B,[i(x,{onClick:t(v)},{default:r(()=>[l("取消")]),_:1},8,["onClick"]),i(x,{type:"primary",onClick:t(C)},{default:r(()=>[l(" 加入 ")]),_:1},8,["onClick"])])]),default:r(()=>[p("span",S,m(t(y)),1),i(R),p("span",null,[l(" 邀请你以"),i(I,{type:"primary"},{default:r(()=>[l(m(t(d)),1)]),_:1}),l("身份加入 "),i(I,{type:"primary"},{default:r(()=>[l(m(t(g)),1)]),_:1})])]),_:1},8,["onClose","modelValue"])}}},J=V(M,[["__scopeId","data-v-e1720fa0"]]);export{J as default};
