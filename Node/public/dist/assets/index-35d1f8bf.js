import{_ as C,r as p,q as b,g as s,R as x,a as c,o as k,c as S,d as i,e as r,b as a,n as d,t as F,I as N,f as $,z as I,Q as E}from"./index-56966d8c.js";import{c as z}from"./share-86ab6d62.js";const B={class:"fileName"},M={class:"fileName-title"},O=["onClick"],T={class:"opt"},q=["onClick"],J=["onClick"],V=["onClick"],j={__name:"index",setup(A){p(!1),p(0);const _={txt:"icon-wenben",excel:"icon-excel",word:"icon-Word",markdown:"icon-file-markdown1",pdf:"icon-pdf1"},u=()=>{},v=e=>{const o=e.filetype||"txt",t={path:`/edit/${e.fileid}`,query:{...e,filetype:o}};o==="word"&&(t.path=`/word/${e.fileid}`),$.push(t)},h=e=>{let{username:o}=JSON.parse(sessionStorage.getItem("user")),t=z(o,e.fileid,e.filename+"."+e.filesuffix);m(t)},m=e=>{if(navigator.clipboard)navigator.clipboard.writeText(e);else{var o=document.createElement("textarea");document.body.appendChild(o),o.style.position="fixed",o.style.clip="rect(0 0 0 0)",o.style.top="10px",o.value=e,o.select(),document.execCommand("copy",!0),document.body.removeChild(o)}I.success("分享链接已经复制到粘贴板")},f=async(e,o)=>{if(o==="top"&&(e.top=!e.top),o==="favor"){const t=JSON.parse(sessionStorage.getItem("user"));await E({userid:t.userid,fileid:e.fileid,favor:"0"}),await s.dispatch("fetchFavorFiles")}};b(async()=>{await s.dispatch("fetchFavorFiles")});const g=x(()=>s.state.favorFiles.filter(e=>e.favor==="1"));return(e,o)=>{const t=c("el-table-column"),w=c("el-table"),y=c("el-pagination");return k(),S("div",null,[i(w,{data:g.value,onSelectionChange:u},{default:r(()=>[i(t,{type:"selection",width:"55"}),i(t,{label:"文件名"},{default:r(n=>[a("div",B,[a("div",M,[a("i",{class:d(["iconfont",_[n.row.filetype]])},null,2),a("span",{onClick:l=>v(n.row)},F(n.row.filename+"."+n.row.filesuffix),9,O)])])]),_:1}),i(t,{prop:"owner",label:"拥有者"}),i(t,{prop:"createtime",label:"日期"}),i(t,{fixed:"right",align:"right"},{default:r(n=>[a("div",T,[a("i",{class:"iconfont icon-lianjie",onClick:l=>h(n.row)},null,8,q),a("i",{class:d(["iconfont",n.row.favor?"icon-shoucang1":"icon-shoucang"]),onClick:l=>f(n.row,"favor")},null,10,J),a("i",{style:N({display:n.row.top?"block":""}),class:d(["iconfont",n.row.top?"icon-tuding":"icon-tuding1"]),onClick:l=>f(n.row,"top")},null,14,V)])]),_:1})]),_:1},8,["data"]),i(y,{background:"",layout:"prev, pager, next",total:30})])}}},Q=C(j,[["__scopeId","data-v-f99321da"]]);export{Q as default};
